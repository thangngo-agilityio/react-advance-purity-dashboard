import{u as l,f as u,m as n,g as s}from"./mainHttpService-CyqCpAzt.js";import{a as P}from"./index-BVtoDrY8.js";const O=()=>{const i=P(),{data:o,isLoading:d,isFetching:f}=l({queryKey:[s.PROJECT],queryFn:async()=>(await n.get(`${s.PROJECT}?view=Grid%20view`)).data,refetchOnWindowFocus:!1}),p=(o==null?void 0:o.records)||[],{mutateAsync:y}=u({mutationFn:async t=>(await n.post(s.PROJECT,t)).data,onSuccess:t=>{const r=t.records;i.setQueryData([s.PROJECT],e=>({records:[...r,...e.records],offset:e.offset}))}}),{mutateAsync:m}=u({mutationFn:async t=>(await n.put(s.PROJECT,t)).data,onSuccess:async(t,r)=>{const e=r.records.map(c=>c);i.setQueryData([s.PROJECT],c=>({records:c.records.map(a=>a.id===e[0].id?{...a,fields:{...a.fields,projectName:e[0].fields.projectName,avatar:e[0].fields.avatar,budget:e[0].fields.budget,status:e[0].fields.status,completion:e[0].fields.completion,description:e[0].fields.description}}:a)}))}});return{projectData:p,isLoading:d,isFetching:f,createProject:y,updateProject:m}};export{O as u};
