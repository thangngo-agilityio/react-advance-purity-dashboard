import{j as f,B as w,ai as l,_ as R}from"./index-BYFe5Z3H.js";import{u as m,a as g,m as i,A as s}from"./mainHttpService-Ufr4JT5f.js";const v=({src:t="/imgs/avatar-default.svg",alt:a,width:c="40px",height:o="40px",...u})=>f.jsx(w,{w:c,h:o,borderRadius:"lg",...u,children:f.jsx(l,{w:"100%",h:"100%",borderRadius:"lg",objectFit:"cover",src:t,alt:a})}),E=()=>{const t=R(),{data:a,isLoading:c,isFetching:o}=m({queryKey:[s.PROJECT],queryFn:async()=>(await i.get(`${s.PROJECT}?view=Grid%20view`)).data,refetchOnWindowFocus:!1}),u=(a==null?void 0:a.records)||[],{mutateAsync:P}=g({mutationFn:async r=>(await i.post(s.PROJECT,r)).data,onSuccess:r=>{const d=r.records;t.setQueryData([s.PROJECT],e=>({records:[...d,...(e==null?void 0:e.records)||[]]}))}}),{mutateAsync:j}=g({mutationFn:async r=>(await i.put(s.PROJECT,r)).data,onSuccess:async(r,d)=>{const e=d.records;t.setQueryData([s.PROJECT],p=>{var y;return{records:(y=p==null?void 0:p.records)==null?void 0:y.map(n=>n.id===e[0].id?{...n,fields:{...n.fields,projectName:e[0].fields.projectName,avatar:e[0].fields.avatar,budget:e[0].fields.budget,status:e[0].fields.status,completion:e[0].fields.completion,description:e[0].fields.description}}:n)}})}});return{projectData:u,isLoading:c,isFetching:o,createProject:P,updateProject:j}},T=t=>{const{data:a,isLoading:c}=m({queryKey:[s.PROJECT,t],queryFn:async({signal:o})=>(await i.getById(s.PROJECT,{signal:o},t)).data,refetchOnWindowFocus:!1});return{projectId:a,loadingProjectId:c}};export{v as A,T as g,E as u};
